<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Meta, title, CSS, favicons, etc. -->
<link rel="SHORTCUT ICON"
	href="assets/images/favicon.png">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>CoBakers - Display Order</title>
<!-- Bootstrap -->
<link
	href="assets/vendors/bootstrap/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Font Awesome -->
<link
	href="assets/vendors/font-awesome/css/font-awesome.min.css"
	rel="stylesheet">
<!-- NProgress -->
<link
	href="assets/vendors/nprogress/nprogress.css"
	rel="stylesheet">
<!-- iCheck -->
<link
	href="assets/vendors/iCheck/skins/flat/green.css"
	rel="stylesheet">
<!-- bootstrap-wysiwyg -->
<link
	href="assets/vendors/google-code-prettify/bin/prettify.min.css"
	rel="stylesheet">

<!-- Select2 -->
<link
	href="assets/vendors/select2/dist/css/select2.min.css"
	rel="stylesheet">
<!-- Switchery -->
<link
	href="assets/vendors/switchery/dist/switchery.min.css"
	rel="stylesheet">
<!-- starrr -->
<link
	href="assets/vendors/starrr/dist/starrr.css"
	rel="stylesheet">




<!-- bootstrap-progressbar -->
<link
	href="assets/vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css"
	rel="stylesheet">
<!-- JQVMap -->
<link
	href="assets/vendors/jqvmap/dist/jqvmap.min.css"
	rel="stylesheet" />
<!-- bootstrap-daterangepicker -->
<link href="assets/vendors/bootstrap-daterangepicker/daterangepicker.css"
	rel="stylesheet">

<!-- Custom Theme Style -->

<link href="assets/build/css/custom.css"
	rel="stylesheet">
<link href="assets/css/loader.css"
	rel="stylesheet">
<link href="assets/css/coreco_design_ui.css"
	rel="stylesheet">
<!-- Custom development common validation Scripts -->
<script src="assets/js/custom_form_validation.js"></script>


<style>
.bootstrap-datetimepicker-widget table td.active,
	.bootstrap-datetimepicker-widget table td.active:hover {
	background-color: #337ab7;
	color: #fff;
}

.price {
	font-size: 14px;
	font-weight: 100;
	color: #555;
	margin: 0;
}

.hide_part_of_billing {
	display: none;
}

.quantity_error {
	border-color: red;
}
</style>


<style>

/*********************** start code for online offline style ****************************/

.led-box {
  height: 15px;
  /* width: 25%; */
  margin: 10px 10px 10px 2px;
  float: right;
  display: none;
}

.led-box p {
  font-size: 12px;
  text-align: center;
  margin: 1em;
}

.led-red {
  margin: 0 auto;
  width: 15px;
  height: 15px;
  background-color: #808080;
  border-radius: 50%;
  box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #999 0 -1px 9px, #fff 0 2px 12px;;
  -webkit-animation: blinkRed 0.5s infinite;
  -moz-animation: blinkRed 0.5s infinite;
  -ms-animation: blinkRed 0.5s infinite;
  -o-animation: blinkRed 0.5s infinite;
  animation: blinkRed 0.5s infinite;
}

.led-green {
  margin: 0 auto;
  width: 15px;
  height: 15px;
  background-color: #0973f7;
  border-radius: 50%;
  box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #304701 0 -1px 9px, #1aa5bb26 0 2px 12px;
}


/*********************** End code for online offline style ****************************/
		</style>
		




</head>

<body class="nav-sm">
	<div class="container body">
		<div class="main_container">


			
				<div class="top_nav" style="margin-left: 0px;">
						<div class="nav_menu">
							<nav>
									<div style="display: initial;">
											<a href="pos_dashboard.html" data-toggle="tooltip" data-placement="right" title="Dashboard" ><img src="assets/images/Dashboard.png" class="img" width="30" style="margin-top: 1%;margin-left: 1%;"></a>
											<a href="POS_New_Order.html" data-toggle="tooltip" data-placement="right" title="Generate Sales Order"><img src="assets/images/New_Order2.png" class="img" width="30" style="margin-top: 1%;margin-left: 1%;"></a>
											<a href="POS_Order_Listing.html" data-toggle="tooltip" data-placement="right" title="Order Listing"><img src="assets/images/listing.png" class="img" width="30" style="margin-top: 1%;margin-left: 1%;"></a>
									</div>
									<div class="led-box online_led" data-toggle="tooltip" data-placement="bottom" title="Online">
										<div class="led-green"></div>
									</div>
										
									<div class="led-box offline_led" data-toggle="tooltip" data-placement="bottom" title="Offline">
										<div class="led-red"></div>
									</div>
								<a style="float: left; margin: 0; padding-top: 16px;"><span
									class="h4"><b>
											
									</b></span><span class="font-thin"><b></b> <span class="h4">
																		</span></a>
								
								<ul class="nav navbar-nav pull-right">
			
									<li class=""><a href="javascript:;"
										class="user-profile dropdown-toggle" data-toggle="dropdown"
										aria-expanded="false"> <img
											src="assets/images/img.png" alt="">
										Operator<span class=" fa fa-angle-down"></span>
									</a>
										<ul class="dropdown-menu dropdown-usermenu pull-right">
											<!--<li><a
												href="<?php echo base_url().'Reset_password/unit/'; ?>">Reset
													Password</a></li>
											-->
		
											<li><a href="#" id="log_out">Log
													Out</a></li>
										</ul></li>
		
									
								</ul>
								
							</nav>
						</div>
					</div>
			<!-- /top navigation -->

			<!-- page content -->
			<div class="right_col" style="margin-left: 0px;" role="main">


				<div class="row">

					<!-- div start-->

					<div class="loading" style="display: none;">Loading&#8230;</div>
<div class="x_panel">

	<div class="x_content">

		<!--<div class="col-md-12 col-sm-12 col-xs-12 form-group x_title">
			<h4>Sales Order</h4>
			
		</div>
-->
		<div class="row"
			style="border-bottom: 1px solid #eee; margin-bottom: 6px;">
			<div class="col-md-4 col-sm-12 col-xs-12 form-group">
				<label for="fullname">Order No. </label> <input type="text"
					placeholder="Order Number" class="form-control mousetrap" id="order_id"
					disabled>
			</div>
			<div class="col-md-2 col-sm-12 col-xs-12 form-group ">
				<label for="fullname">Date </label>
				<div class="input-group date" id="sales_order_date" >
					<input type="text" class="form-control mousetrap" id="order_date" tabindex="-1" disabled><span
						class="input-group-addon"><span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>

			</div>


			<!--<div class="col-md-4 col-sm-12 col-xs-12 form-group pull-right">
<label for="vendername">Vendor Name :</label> <input
list="vendor_list" name="search_vendor" type="text"
	id="search_vendor" onkeyup="vendorSearch();" onchange=""
		placeholder="Enter Vendor Name" class="form-control" autofocus>
<datalist id="vendor_list">
</datalist>
<label id="vendor_name_error" style="color:red;display:none;">Please enter valid vendor name.<label>
</div>-->
			<div class="col-md-4 col-sm-12 col-xs-12 form-group pull-right">
				<label for="customername">Customer Name</label> <input type="text"
					placeholder="Enter Customer Name " class="form-control mousetrap" value="Customer"
					id="customer_name" tabindex="-1" disabled> <label id="customer_name_error"
					style="color: red; display: none;">Please enter customer
					name.<label>
			</div>
		</div>
		


		
		<!--row close-->





		<table class="table table-bordered table-hover" >
			<thead>
				
				<th width="35%">Product/Item</th>
				<th width="10%">Quantity</th>
				<th width="10%">Rate</th>
				<th width="10%">Amount</th>

			</thead>
			<tbody id="detail">
			</tbody>
			<tr >
				<th colspan="3" style="text-align: right;">Total Amount (INR)</th>
				<th style="text-align: center;" class=""><b><input
						class="form-control align_pull text-center input-sm sub_total mousetrap"
						type="text" name="sub_total" id="total_amount" disabled></b></th>
			</tr>
			
			<tr >
				<th colspan="3" style="text-align: right;">Received (INR)</th>
				<th style="text-align: center;" class=""><b><input
						class="form-control align_pull text-center input-sm paid_amount mousetrap"
						type="text" name="paid_amount" id="paid_amt"
						onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46"
						disabled></b></th>
			</tr>
			<tr >
				<th colspan="3" style="text-align: right;">Balance (INR)</th>
				<th style="text-align: center;" class=""><b><input
						class="form-control align_pull text-center input-sm balance mousetrap"
						type="text" name="balance" id="balance" disabled></b></th>
			</tr>
		</table>
		<div class="row">
			<span id="error_balance_amount" class="pull-left" style="color: red"></span>
		</div>

		<div class="row ">
			<div class="col-md-5">
				<label for="note">Order Note </label>
				<textarea class="form-control order_note mousetrap" rows="3"
					placeholder="Order Note" id="order_note" tabindex="-1" disabled></textarea>

			</div>
			<div class="col-md-3 col-sm-12 col-xs-12 form-group">
				<label for="fullname">Payment Method * </label> <select disabled
					class="form-control mousetrap" id="payment_method" tabindex="-1">
					<option value="0" >Cash</option>
					<option value="1">Cheque</option>
					<option value="2">Credit</option>
					<option value="3">Online</option>
					<option value="4">Other</option>
				</select>
			</div>
			<!-- <div class="pull-right"> -->
			



				
				<div class="col-md-2" style="margin-top: 20px;" id="close">
					<button class="btn btn-primary btn-block btn-primary" type="button" tabindex="-1">Close</button>
				</div>
				<div class="col-md-2" style="margin-top: 20px;">
					<button title="Print" class="btn btn-primary btn-block btn-primary"
						id="print_button" onclick="PrintDiv();" tabindex="-1" disabled>
						<i class="fa fa-print"></i> Print
					</button>
				</div>

				
				
			</span>
			<!--</div>-->
		</div>
	</div>
</div>


<div class="modal fade" id="sales_order_success_modal" tabindex="-1"
	role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
	data-keyboard="false" aria-hidden="true">
	<div class="modal-dialog modal-md">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close close_modal" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">Sales Order</h4>
			</div>
			<div class="modal-body">
				<form data-parsley-validate class="form-horizontal form-label-left"
					name="formdata" id="formdata">
					<div class="x_content">
						<div class="col-md-12 col-sm-12 col-xs-12 form-group">
							<label style="font-size: 15px;">Your Sales Order has been
								generated successfully.</label>
						</div>
						<div class="col-md-12 col-sm-12 col-xs-12 form-group"
							style="text-align: right">
							<button type="button" class="btn btn-primary close_modal"
								data-dismiss="modal">Ok</button>
						</div>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>


<div class="modal fade" id="sales_order_confirmation_modal"
	tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	data-backdrop="static" data-keyboard="false" aria-hidden="true">
	<div class="modal-dialog modal-md">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">Sales Order
					Confirmation</h4>
			</div>
			<div class="modal-body">
				<form data-parsley-validate class="form-horizontal form-label-left"
					name="formdata" id="formdata">
					<div class="x_content">
						<div class="col-md-12 col-sm-12 col-xs-12 form-group">
							<label style="font-size: 15px;">Sales Order will be
								finalized. Do you want to proceed?</label>
						</div>
						<div class="col-md-12 col-sm-12 col-xs-12 form-group"
							style="text-align: right">
							<button type="button" class="btn btn-primary"
								id="save_sales_order">Yes</button>
							<button type="button" class="btn btn-primary"
								data-dismiss="modal">No</button>
						</div>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>




<div class="modal fade" id="sales_order_stock_manage_modal"
	tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	data-backdrop="static" data-keyboard="false" aria-hidden="true">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header alert-danger">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel" style="color: #fff">Alert</h4>
			</div>
			<div class="modal-body">
				<form data-parsley-validate class="form-horizontal form-label-left"
					name="formdata" id="formdata">
					<div class="x_content">
						<div class="col-md-12 col-sm-12 col-xs-12 form-group">
							<label style="font-size: 15px;">Product quantity out of
								stock.</label>
						</div>
						<div class="col-md-12 col-sm-12 col-xs-12 form-group"
							style="text-align: right">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Ok</button>
						</div>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>
					
					<!-- div end -->
				</div>



			</div>
		</div>
		<!-- /page content -->

		<!-- footer content -->
		<footer style="margin-left: 0px;">
			<div class="pull-right">
				&copy; 2017-18 Powered by <a href="https://corecotechnologies.com"
					target="_blank">CoReCo Technologies</a>
			</div>
			<div class="clearfix"></div>
		</footer>
		<!-- /footer content -->
	</div>
	</div>




<script type="text/javascript">

Date.prototype.getCurrentTime = function()
{
return ((this.getHours() < 10)?"0":"") + ((this.getHours()>12)?(this.getHours()-12):this.getHours()) +":"+ ((this.getMinutes() < 10)?"0":"") + this.getMinutes() +":"+ ((this.getSeconds() < 10)?"0":"") + this.getSeconds() + ((this.getHours()>12)?(' PM'):' AM');
};
	
// 	function PrintDiv() {
		
// 		//var currenttime = '<?php echo date("h:i A") ?>';
		
// 		//return false;
// 		var divToPrint = document.getElementById('divToPrint');
// 		/*var order_id = $('#order_id').val();
// 		var order_date = $('#order_date').val();
		
		
// 		var total_wholesale_amount = $('.total').val();
// 		var total_retail_amount = $('.retail_total').val();

// 		var paid_amt = $(".paid_amount").val();
// 		var balance = $(".balance").val();
// 		var supplier_name = $('#supplier_name').val();
// 		var invoice_number = $('#invoice_number').val();*/
		
		
				
// var today = new Date(); //date object

// var currenttime = today.getCurrentTime();
		
		
// 		var order_id = $('#order_id').val();
// 		var order_date = $('#order_date').val();
// 		//var order_note = $('textarea').val();    //$(".order_note").text();
// 		//var payment_method = $('#payment_method').val();
// 		var total_wholesale_amount = $('.sub_total').val();
// 		var paid_amt = $(".paid_amount").val();
// 		var balance = $(".balance").val();
// 		var vendor_name = $('#customer_name').val();

// 		var popupWin = window.open('', '_blank', 'width=1000,height=1000');
// 	//	popupWin.document.body.style.margin = '0 0';
// 		popupWin.document.open();
		
// 	popupWin.document
// 				.write('<html><body><div style="width:170px;">');
				
// 				//popupWin.document.write('<br><br>Hello Bakers <br/>'); 
// 		popupWin.document
// 				.write('<div style= "text-align:left; font-size:10"><b><h3>'
// 						+ company_name_for_print
// 						+ ' - '
// 						+ unit_name_for_print
// 						+ '</h3></b></div>');
// 		popupWin.document.write('<p style="font-size:14">Order No : ' + order_id+'</p>');
// 		popupWin.document.write('<p style="font-size:14">Date-' + order_date +' '+currenttime+ '</p>');
// 		popupWin.document.write('<br/><b style="font-size:12">Name : ' + vendor_name + '</b><br/><br/>');

// 		popupWin.document
// 				.write('<table style="font-size:14;" width="100%"><thead><th width="30%">Item</th><th width="20%">Qty</th><th width="20%">Rate</th><th width="20%">Price</th></thead>');
//                 var itemcount = 0;
// 		$('#detail tr').each(
// 				function(row, tr) {
// 					itemcount++;
// 					popupWin.document.write('<tr><td>'
// 							+ $(tr).find('td:eq(3)').text().slice(0, 10) + '</td><td>'
// 							+ $(tr).find('.quantity').val() + '</td><td style="text-align: right;"> '
// 							+ $(tr).find('.price').val() + ' </td><td style="text-align: right;"> '
// 							+ $(tr).find('.amount').val() + ' </td>'
// 							);
// 				});

// 		popupWin.document
// 				.write('<tr><th colspan="3" style="text-align: right;">Total (&#x20b9;)</th> <td>'
// 						+ total_wholesale_amount
// 						+ '</td></tr></table>');
		
// 		popupWin.document.write('<br/>No of items : ' + itemcount + '<br/>');
		
// 		popupWin.document.write('<p style="text-align:center;font-size:13px">Thanking You, Visit again.</p>');
// 		popupWin.document.write('<p style="text-align:center;font-size:14px"><b>CoBakers.com</b></p><br/>');
		
// 		//popupWin.document.write('</div><br/><br/><br/>--Welcome To CoBakers--');
// 		popupWin.document.write('</div></body></html>');
// 		 /*setTimeout(() => { // Needed for large documents
// 		      popupWin.document.body.style.margin = '0 0';
// 		      popupWin.document.body.innerHTML = printElement.outerHTML;
// 		      popupWin.document.close(); // necessary for IE >= 10
// 		      popupWin.focus(); // necessary for IE >= 10
// 		      popupWin.print();
// 		      popupWin.close();
// 		    }, 1000)*/
// 		popupWin.print();
// 		popupWin.document.close();
// 	}
function PrintDiv() {
	//alert('hi');

var today = new Date(); //date object

var currenttime = today.getCurrentTime();
		
		
		var order_id = $('#order_id').val();
		var order_date = $('#order_date').val();
		
		var total_wholesale_amount = $('.sub_total').val();
		var paid_amt = $(".paid_amount").val();
		var balance = $(".balance").val();
		var vendor_name = $('#customer_name').val();
		
		var rows = '';
		rows = '<html><body><div style="width:200px;">';
				
				
		rows += '<p style="font-size:14">Order No : ' + order_id+'</p>';
		rows += '<p style="font-size:14">Date-' + order_date +' '+currenttime+ '</p>';
		rows += '<br/><b style="font-size:12">Name : ' + vendor_name + '</b><br/><br/>';

		rows += '<table style="font-size:14;" width="100%"><thead><th width="30%">Item</th><th width="20%">Qty</th><th width="20%">Rate</th><th width="20%">Price</th></thead>';
                var itemcount = 0;
		$('#detail tr').each(
				function(row, tr) {
					itemcount++;
					rows += '<tr><td>'
							+ $(tr).find('td:eq(2)').text().slice(0, 10) + '</td><td>'
							+ $(tr).find('td:eq(3)').text() + '</td><td style="text-align: right;"> '
							+ $(tr).find('.price').val() + ' </td><td style="text-align: right;"> '
							+ $(tr).find('.amount').val() + ' </td>'
							;
				});

		rows += '<tr><th colspan="3" style="text-align: right;">Total (&#x20b9;)</th> <td>'
						+ total_wholesale_amount
						+ '</td></tr></table>';
		
		rows += '<br/>No of items : ' + itemcount + '<br/>';
		
		rows += '<p style="text-align:center;font-size:13px">Thanking You, Visit again.</p>';
		rows += '<p style="text-align:center;font-size:14px"><b>CoBakers.com</b></p><br/>';
		
		//popupWin.document.write('</div><br/><br/><br/>--Welcome To CoBakers--');
		rows += '</div></body></html>';

		window.frames["print_frame"].document.body.innerHTML=rows;
                window.frames["print_frame"].window.focus();
                window.frames["print_frame"].window.print();
		$('.loading').hide();
}
</script>
<iframe name="print_frame" width="0" height="0" frameborder="0" src="about:blank"></iframe>









<div id="divToPrint" style="display: none;">
	<div style="width: 200px; height: 300px; background-color: teal;">
		
	</div>
</div>






<div class="clearfix"></div>









<!-- <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.js"></script> -->
<!--<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>-->
<script src="assets/jquery/jquery-2.2.3.min.js"></script>

<script
	src="assets/vendors/moment/min/moment.min.js"></script>
<script
	src="assets/vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- bootstrap-datetimepicker -->
<script
	src="assets/vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

	<!-- jQuery 
<script src="<?php echo base_url();?>assets/vendors/jquery/dist/jquery.min.js"></script>-->
	
	<script
		src="assets/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
	
<!--	<script
		src="<?php echo base_url();?>assets/vendors/fastclick/lib/fastclick.js"></script>
	
	<script
		src="<?php echo base_url();?>assets/vendors/nprogress/nprogress.js"></script>
	
	<script
		src="<?php echo base_url();?>assets/vendors/Chart.js/dist/Chart.min.js"></script>
	
	<script
		src="<?php echo base_url();?>assets/vendors/gauge.js/dist/gauge.min.js"></script>
	
	<script
		src="<?php echo base_url();?>assets/vendors/bootstrap-progressbar/bootstrap-progressbar.min.js"></script>
	<!-- iCheck -->
	<script
		src="assets/vendors/iCheck/icheck.min.js"></script>
	
	<script src="assets/vendors/skycons/skycons.js"></script>
	
	<script
		src="assets/vendors/Flot/jquery.flot.js"></script>
	<script
		src="assets/vendors/Flot/jquery.flot.pie.js"></script>
	<script
		src="assets/vendors/Flot/jquery.flot.time.js"></script>
	<script
		src="assets/vendors/Flot/jquery.flot.stack.js"></script>
	<script
		src="assets/vendors/Flot/jquery.flot.resize.js"></script>
	
	<script
		src="assets/vendors/flot.orderbars/js/jquery.flot.orderBars.js"></script>
	<script
		src="assets/vendors/flot-spline/js/jquery.flot.spline.min.js"></script>
	<script
		src="assets/vendors/flot.curvedlines/curvedLines.js"></script>

	<script
		src="assets/vendors/DateJS/build/date.js"></script>

	<script
		src="assets/vendors/jqvmap/dist/jquery.vmap.js"></script>
	<script
		src="assets/vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>
	<script
		src="assets/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>

	<script
		src="assets/vendors/moment/min/moment.min.js"></script>
	<script
		src="assets/vendors/bootstrap-daterangepicker/daterangepicker.js"></script>


	<!-- <script
		src="assets/vendors/parsleyjs/dist/parsley.min.js"></script> -->



	<script src="assets/build/js/custom.min.js"></script>
	<script
	src='assets/js/mousetrap.min.js'></script>


    <script type="text/javascript">
        var db;

        $(function ()
        {
			$('#close').click(function()
			{
				//window.history.back();
				location.href ='POS_Order_Listing.html';
			});
			Mousetrap.bind(['ctrl+b'], function() {
				window.history.back();
			});
			setInterval(function() {
			if(navigator.onLine)
			{
				$('.online_led').show();
				$('.offline_led').hide();
			}
			else
			{
				$('.online_led').hide();
				$('.offline_led').show();
			}
		}, 500); // 500 milliseconds


			$('#log_out').click(function()
            {
				//alert('hi');
				localStorage.clear();

				// redirect to login page
				location.href ='Login.html';
			});


            var order_id = window.location.href.split("=").pop();
            //alert(order_id);

            if(localStorage.length > 0)
			{
				console.log("Session Present");											
			}
		else
			{
				console.log("Session Not Present");
				location.href ='Login.html';
			}

		window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
		
                var request = window.indexedDB.open("CoBakers", 1);

                request.onerror = function(e)
                {
                        console.log("error: ");
                };


                request.onsuccess = function(e)
                {
                        db = request.result;
                        console.log('Got a db connection! It is %s', db);
                };

                request.onupgradeneeded = function(e)
                {
                        var db = e.target.result;
                        if(!db.objectStoreNames.contains('sales_order'))
                        {
                                var os = db.createObjectStore("sales_order", {keyPath: "order_id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("order_id", "order_id", { unique: true });
                        }

                        if(!db.objectStoreNames.contains('items'))
                        {
                                var os = db.createObjectStore("items", {keyPath: "item_id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("item_id", "item_id", { unique: true });
                        }

						if(!db.objectStoreNames.contains('user_details'))
                        {
                                var os = db.createObjectStore("user_details", {keyPath: "phone_no", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("phone_no", "phone_no", { unique: true });
						}
						if(!db.objectStoreNames.contains('order_id_details'))
                        {
                                var os = db.createObjectStore("order_id_details", {keyPath: "order_id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("order_id", "order_id", { unique: true });
                        }
						if(!db.objectStoreNames.contains('order_log'))
                        {
                                var os = db.createObjectStore("order_log", {keyPath: "order_id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("order_id", "order_id", { unique: true });
                        }

						if(!db.objectStoreNames.contains('pull_products_log'))
                        {
                                var os = db.createObjectStore("pull_products_log", {keyPath: "id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex( "id","id", { unique: true });
                        }
						if(!db.objectStoreNames.contains('push_orders_log'))
                        {
                                var os = db.createObjectStore("push_orders_log", {keyPath: "id", autoIncrement:true});
                                // Create Index for name
                                //  os.createIndex('name','name',{unique:false});
                                os.createIndex("id", "id", { unique: true });
                        }

                }

setTimeout(function(){
        var transaction = db.transaction("sales_order","readonly")
		var store = transaction.objectStore("sales_order");
		var cursor = store.openCursor();
        cursor.onsuccess = function(e)
			{
                
				var res = e.target.result;
				if(res)
				{
                    var loc_order_id = res.key;
					if(loc_order_id === order_id)
					{
                        var order_date = res.value.order_date;
						var customer_name = res.value.customer_name;
                        var balance = res.value.balance;
                        var order_note = res.value.order_note;
                        var payment_method = res.value.payment_method;
                        var paid_amt = res.value.paid_amt;
                        var total_amount = res.value.total_amount;	
                        

$('#order_id').val(order_id);
$('#order_date').val(order_date);
$('#order_note').val(order_note);
$('#payment_method').val(payment_method);
$('#total_amount').val(total_amount);
$('#paid_amt').val(paid_amt);
$('#balance').val(balance);
$('#customer_name').val(customer_name);

//"[{"item_id":"3767","item_quantity":"1","item_price":"10.00","item_amount":"10.00"},{"item_id":"3766","item_quantity":"1","item_price":"10.00","item_amount":"10.00"}]"

var order_item = JSON.parse(res.value.order_item);	
//alert(order_item.length);
for(var i =0; i< order_item.length; i++)
{
	var item_id = order_item[i].item_id;
	var item_name = order_item[i].item_name;
    var item_quantity = order_item[i].item_quantity;
    var item_price = order_item[i].item_price;
    var item_amount = order_item[i].item_amount;
    //alert(item_id);

    var n = ($('#detail tr').length - 0) + 1;
													var tr = '<tr>'
															+ '<td class="no" style="display:none;">'
															+ n
															+ '</td>'
															+ '<td class="" style="display:none;">'
															+ item_id
                                                            + '</td>'
                                                            +'<td>'
                                                                +item_name
                                                                +'</td>'
															
															+ '<td class="">'
															+ item_quantity
															+ '</td>'
															+ '<td><input class="form-control text-center input-sm align_pull price" type="text" name="rate" id="product_price'+n+'" value="'+item_price+'" onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46" disabled>'
															+

															'<td><input type="text" class="form-control input-sm align_pull amount" id="product_amount'+n+'" name="amount" value="'+item_amount+'" disabled></td>'
															+ '</tr>';
													$('#detail').prepend(tr);
													
}



                            
                    }
                    res.continue();
															
				}
														
            }

			transaction.oncomplete  = function(e) {
						$('#print_button').prop('disabled',false);
							};

			
        },1000);
    
        });

       
    
    
    
    </script>



</body>
</html>